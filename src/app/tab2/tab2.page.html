<ion-content [fullscreen]="true" class="ion-padding">
  <ion-card>
    <ion-header collapse="fade" class="ion-no-border">
      <ion-toolbar>
        <ion-title style="padding-top: 15px;" size="large">Oblíbené týmy</ion-title>
        <img slot="end" src="assets/icon/icon.png" alt="App Icon" class="header-icon" />
      </ion-toolbar>
    </ion-header>
    <ion-card-content>
      <ion-list *ngIf="favourites.length">
        @for (team of favourites; track team.idTeam) {
          <ion-card class="team-card ion-margin-bottom">
            <ion-card-content>
              <div style="display:flex; gap:12px; align-items:center;">
                <ion-img 
                  [src]="team.primaryImage || team.strBadge" 
                  style="max-width:80px; max-height:80px; border-radius:8px; object-fit:contain;" 
                  alt="logo">
                </ion-img>
                <div style="flex:1;">
                  <h2 style="margin:0 0 8px 0; font-weight:600;">{{ team.displayName || team.strTeam }}</h2>
                  <div style="display:flex; gap:8px; flex-wrap:wrap; font-size:0.9em;">
                    <ion-badge *ngIf="team.strCountry" color="primary">
                      <ion-icon name="location" style="font-size:12px; margin-right:4px;"></ion-icon>
                      {{ team.strCountry }}
                    </ion-badge>
                    <ion-badge *ngIf="team.strSport" color="secondary">
                      <ion-icon name="football" style="font-size:12px; margin-right:4px;"></ion-icon>
                      {{ team.strSport }}
                    </ion-badge>
                    <ion-badge *ngIf="team.strLeague" color="tertiary">
                      {{ team.strLeague }}
                    </ion-badge>
                  </div>
                </div>
              </div>
              <div class="ion-padding-top" style="display:flex; gap:8px; justify-content:flex-end;">
                <ion-button size="small" color="primary" (click)="toggleDetail(team)">
                  <ion-icon slot="start" name="information-circle"></ion-icon>
                  Detail
                </ion-button>
                <ion-button size="small" color="danger" (click)="onRemove(team)">
                  <ion-icon slot="start" name="trash"></ion-icon>
                  Odebrat
                </ion-button>
              </div>
            </ion-card-content>
          </ion-card>
        }
      </ion-list>
      
      <div *ngIf="!favourites.length" class="ion-text-center ion-padding">
        <ion-icon name="heart" style="font-size:64px; opacity:0.3;"></ion-icon>
        <p style="opacity:0.6; margin-top:16px;">Nemáte žádné oblíbené týmy</p>
      </div>
    </ion-card-content>
  </ion-card>

  <!-- Detail View -->
  <ion-card *ngIf="showDetail && selectedTeam as st" class="detail-card ion-margin-top">
    <ion-card-header>
      <ion-card-title>{{ st.displayName || st.strTeam }}</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <div class="detail-image-container" style="text-align:center; margin-bottom:16px;">
        <ion-img 
          [src]="st.primaryImage || st.strBadge" 
          style="max-width:200px; max-height:200px; margin:0 auto; border-radius:12px; object-fit:contain;" 
          alt="team image">
        </ion-img>
      </div>
      
      <ion-list class="ion-no-padding">
        <ion-item *ngIf="st.strSport">
          <ion-icon name="football" slot="start" color="primary"></ion-icon>
          <ion-label>
            <h3>Sport</h3>
            <p>{{ st.strSport }}</p>
          </ion-label>
        </ion-item>
        
        <ion-item *ngIf="st.strLeague">
          <ion-icon name="trophy" slot="start" color="warning"></ion-icon>
          <ion-label>
            <h3>Liga</h3>
            <p>{{ st.strLeague }}</p>
          </ion-label>
        </ion-item>
        
        <ion-item *ngIf="st.strCountry">
          <ion-icon name="location" slot="start" color="danger"></ion-icon>
          <ion-label>
            <h3>Země</h3>
            <p>{{ st.strCountry }}</p>
          </ion-label>
        </ion-item>
        
        <ion-item *ngIf="st.strStadium">
          <ion-icon name="business" slot="start" color="secondary"></ion-icon>
          <ion-label>
            <h3>Stadion</h3>
            <p>{{ st.strStadium }} <span *ngIf="st.intStadiumCapacity">({{ st.intStadiumCapacity }} míst)</span></p>
          </ion-label>
        </ion-item>
        
        <ion-item *ngIf="st.intFormedYear">
          <ion-icon name="calendar" slot="start" color="tertiary"></ion-icon>
          <ion-label>
            <h3>Založeno</h3>
            <p>{{ st.intFormedYear }}</p>
          </ion-label>
        </ion-item>
      </ion-list>
      
      <div *ngIf="st.strDescriptionEN" class="ion-padding-top">
        <h3>Popis</h3>
        <p style="text-align:justify;">{{ st.strDescriptionEN }}</p>
      </div>
      
      <div *ngIf="st.strWebsite || st.strFacebook || st.strTwitter || st.strInstagram" class="ion-padding-top">
        <h3>Odkazy</h3>
        <div style="display:flex; gap:8px; flex-wrap:wrap;">
          <ion-button *ngIf="st.strWebsite" size="small" fill="outline" [href]="'https://' + st.strWebsite" target="_blank">
            <ion-icon slot="start" name="globe"></ion-icon>
            Web
          </ion-button>
          <ion-button *ngIf="st.strFacebook" size="small" fill="outline" [href]="'https://' + st.strFacebook" target="_blank" color="primary">
            <ion-icon slot="start" name="logo-facebook"></ion-icon>
            Facebook
          </ion-button>
          <ion-button *ngIf="st.strTwitter" size="small" fill="outline" [href]="'https://' + st.strTwitter" target="_blank" color="secondary">
            <ion-icon slot="start" name="logo-twitter"></ion-icon>
            Twitter
          </ion-button>
          <ion-button *ngIf="st.strInstagram" size="small" fill="outline" [href]="'https://' + st.strInstagram" target="_blank" color="tertiary">
            <ion-icon slot="start" name="logo-instagram"></ion-icon>
            Instagram
          </ion-button>
        </div>
      </div>
      
      <div class="ion-padding-top">
        <ion-button expand="block" (click)="toggleDetail()">
          Zavřít
        </ion-button>
      </div>
    </ion-card-content>
  </ion-card>
</ion-content>
